<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" href="/images/icons/icon-152x152.png" />
    <!-- theme-color defines the top bar color-->
    <meta name="theme-color" content="#575757" />
    <meta
      http-equiv="X-Content-Security-Policy"
      content="default-src 'self'; script-src 'report-sample' 'self' https://app.posthog.com/static/array.js https://www.googletagmanager.com/gtag/js; style-src 'report-sample' 'self' https://fonts.googleapis.com; object-src 'none'; base-uri 'self'; connect-src 'self' https://app.posthog.com; font-src 'self'; frame-src 'self'; img-src 'self'; manifest-src 'self'; media-src 'self'; report-uri https://pauldambra.report-uri.com/r/d/csp/enforce; worker-src 'self';"
    />
    <!-- Add to home screen for Safari on iOS-->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="MiRaNo" />
    <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png" />

    <!-- Add to home screen for Windows-->
    <meta
      name="msapplication-TileImage"
      content="/images/icons/icon-152x152.png"
    />
    <meta name="msapplication-TileColor" content="#575757" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Static Factory Methods FTW</title>
    <link rel="canonical" href="https://pauldambra.dev/static-factory-methods.html" />
    <meta property="og:url" content="https://pauldambra.dev/static-factory-methods.html" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Static Factory Methods FTW" />
    <meta
      property="og:description"
      content="using static factories to improve discoverability"
    />
    <meta
      property="og:image"
      content="https://pauldambra.dev/images/cardboard.jpg"
    />
    <meta name="twitter:creator" content="@pauldambra" />
    <meta property="fb:app_id" content="1029758320473951" />

    <meta name="viewport" content="width=device-width" />
    <meta
      name="description"
      content="using static factories to improve discoverability"
    />
    <meta property="fb:pages" content="1029758320473951" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Mindless Rambling Nonsense"
      href="https://pauldambra.dev/feed.xml"
    />
    <link rel="shortcut icon" href="/favicon.ico" />

    <link rel="prefetch" href="/images/cardboard.jpg" />

    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <meta name="msvalidate.01" content="54691C3C7B863CEE60F0305D6EDFF7A8" />
    <meta
      name="google-site-verification"
      content="hLKEdujpXNQ9PSZWEcQkwxCgL2z1tWxVedeaUmttH7c"
    />
    <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group identify setPersonProperties setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags resetGroups onFeatureFlags addFeatureFlagsHandler onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_YwZdW7eDzRlzm3YiNvZpAR5oGhmc9nYeVwuUq5mef3b', {
        api_host: 'https://ph.pauldambra.dev',
        defaults: '2026-01-30'
    })
</script>

  </head>
  <body class="flex flex-col h-screen">
    <header class="flex flex-col px-8 pt-4 text-white text-xl" role="banner">
  <div class="flex flex-col sm:flex-row">
    <div class="no-underline hover:underline">
      <a href="/">Mindless Rambling Nonsense</a>
    </div>
    <div class="flex-grow my-2 sm:m-0"></div>
    <div class="flex justify-start items-end flex-col text-sm">
      <div class="flex items-center">
        <div class="mr-4">Paul D'Ambra</div>
        <a href="https://github.com/pauldambra" rel="noopener">
          <img
            src="/images/GitHub-Mark-Light-32px.png"
            alt="pauldambra on github"
            width="32"
            height="32"
          />
        </a>
      </div>
      <div class="flex items-center">
        <div class="mr-4">Fangler</div>
        <a href="https://twitter.com/pauldambra" rel="noopener">
          <img
            src="/images/twitter-32.png"
            alt="pauldambra on twitter"
            width="32"
            height="32"
          />
        </a>
      </div>
      <div class="flex items-center">
        <div class="mr-4"></div>
        <a rel="me" href="https://mastodon.me.uk/@pauldambra">
        </a>
      </div>
    </div>
  </div>
  <div class="flex-grow"></div>
  <div
    class="flex align-middle items-start px-2 py-4 text-white space-x-4 text-lg"
  >
    <nav role="navigation">
      <a class="underline" href="/">Blog Posts</a>
      <a class="underline ml-5" href="/weeknotes.html">Week Notes</a>
      <a class="underline ml-5" href="/kids-games.html">Kids games</a>
    </nav>
  </div>
</header>

    <main role="main" class="bg-white p-4 w-11/12 m-auto flex-auto flex-grow">
      

<script type="application/ld+json">
  {
     "@context":"http://schema.org",
     "@type":"BlogPosting",
     "headline":"Static Factory Methods FTW",
     "genre":"",
     "keywords":"",
     "wordCount":"616",
     "url":"https://pauldambra.dev/static-factory-methods.html",
     "datePublished":"2014-09-13",
     "author":{
        "@type":"Person",
        "name":"Paul D'Ambra",
        "sameAs":[
          "https://twitter.com/pauldambra",
          "https://github.com/pauldambra",
          "https://plus.google.com/u/0/+PaulDAmbraPlus"
        ]
     },
     "publisher":{
  "@type": "Organization",
      "name": "Paul D'Ambra",
      "sameAs": [
          "https://twitter.com/pauldambra",
          "https://github.com/pauldambra",
          "https://plus.google.com/u/0/+PaulDAmbraPlus"
      ],
      "logo": {
        "@type": "ImageObject",
        "contentUrl": "https://pauldambra.dev/images/logo.png",
          "url": "https://pauldambra.dev"
      }
     },
     "image":{
        "@type":"ImageObject",
        "contentUrl":"https://pauldambra.dev/images/cardboard.jpg",
        "url":"https://pauldambra.dev",
        "height":"450",
        "width":"1000"
     },
     "mainEntityOfPage":{
        "@type":"WebPage",
        "@id":"https://pauldambra.dev/static-factory-methods.html"
     },
     "articleBody":"It  is  relatively  common  to  find  (or  write)  a  line  of  code  like  this\n\n\tvar  thingy  =  new  Thingy(_someDependency,  false);\n\n\nReading  this  line  a  person  can  know  this  is  initialising  a  Thingy  which  takes  a  dependency  on  something…  and  something  else  is  false.\n\nI'm  really  lazy  and  easily  distracted  so  I  don't  like  to  have  to  think  about  anything  except  the  one  task  I'm  trying  to  not  get  distracted  from.  Having  to  think  about  what  it  means  that  something  is  false  provides  an  opportunity  for  me  to  get  distracted.\n\n\n\nAlso,  this  means  there  is  some  information  or  some  decision  that  has  been  taken  by  a  previous  developer  that  they  have  kept  in  their  brain  -  all  the  person  reading  this  line  sees  is  the  result  of  that.  Each  time  somebody  comes  to  this  class  they  may  have  to  invest  time  reminding  themselves  what  the  boolean  parameter  means.\n\nCan  it  be  better?\n\nWell,  C#  (as  well  as  other  languages)  allows  named  parameters  so  this  Thingy  could  be  instantiated  by  using\n\n\tvar  thingy  =  new  Thingy(_someDependency,  disableUnexpectedBehaviour:  false);\n\n\nNow  when  a  person  reads  this  line  of  code  they  know  more  about  what  is  happening  and  that  should  support  them  in  introducing  correct  code.  Here  they  learn  that  there  is  a  mode  where  this  class  can  do  something  in  an  unexpected  way.  Since  the  named  parameter  makes  the  intent  clearer  a  developer  can  make  a  decision  about  how  to  instantiate  the  class  with  a  reasonable  idea  of  what  will  happen.\n\nHowever,  the  next  time  someone  writes  code  that  uses  a  Thingy  they  don't  have  to  use  a  named  parameter  so  it  is  still  possible  to  use  the  form  which  obscures  intent.\n\nStatic  Factory  Method\n\nIt  is  possible  to  hide  the  constructor  and  provide  static  factory  methods  to  create  and  return  instances.  Where  there  is  more  than  one  way  to  construct  the  object  more  than  one  factory  method  can  be  provided  to  clarify  this  difference.\n\nThese  are  my  latest  obsession  -  so  I  recommend  taking  the  time  to  jump  to  the  declaration  of  Thingy  and  do  something  like  this:\n\n\nclass  Thingy  \n{\n        private  readonly  SomeDependency  _someDependency;\n\tprivate  readonly  bool  _disableUnexpectedBehaviour\n\n        //  make  the  constructor  private  -  this  isn't  necessary  \n        //  but  enforces  the  use  of  the  static  factory  methods\n\tprivate  Thingy(SomeDependency  someDependency,  bool  disableUnexpectedBehaviour)  \n\t{\n\t\t_someDependency  =  someDependency;\n\t\t_disableUnexpectedBehaviour  =  disableUnexpectedBehaviour;\n\t}\n\t\n\t//add  static  factory  methods\n\tpublic  static  Thingy  WithExpectedBehaviour(SomeDependency  someDependency)\n\t{\n\t\treturn  new  Thingy(someDependency,  true);\n\t}\n\n\tpublic  static  Thingy  WithUnexpectedBehaviour(SomeDependency  someDependency)\n\t{\n\t\treturn  new  Thingy(someDependency,  false);\n\t}\n\n\t//&lt;snip/&gt;\n}\n\n\tvar  thingy  =    Thingy.WithExpectedBehaviour(_someDependency);\n\tvar  crazyThingy  =    Thingy.WithUnexpectedBehaviour(_someDependency);\n\n\n\nNow  you  can't  construct  a  Thingy  without  using  one  of  these  methods.  This  means  that  your  decision  to  use  a  Thingy  includes  an  explicit  decision  about  what  it  means  for  it  to  be  included  in  your  code.  Yay  for  clarity!\n"
  }
</script>

<article>
<header class="flex flex-col border-b-black border-b-2 bg-white text-black">
  <div class="heading">
    <div class="date">Sat Sep 13 2014</div>
    <h1 class="title leading-10 pt-2 mb-0 mt-1">Static Factory Methods FTW</h1>
  </div>
  <div class="meta flex-grow flex flex-row">
    <div class="share-this flex self-end space-x-2">
      <a
        id="facebook-share-link"
        class="social-share"
        target="_blank"
        rel="noopener"
        href="https://www.facebook.com/dialog/share?app_id=305449093152216&href=https://pauldambra.dev/static-factory-methods.html"
      >
        <img
          class="w-8"
          src="/images/facebook-black-32.png"
          alt="share on facebook"
          width="32"
          height="32"
        />
      </a>
      <a
        id="twitter-share-link"
        class="social-share"
        target="_blank"
        rel="noopener"
        href="https://twitter.com/intent/tweet?text=Static+Factory+Methods+FTW&via=pauldambra&url=https://pauldambra.dev/static-factory-methods.html"
      >
        <img
          class="w-8"
          src="/images/twitter-black-32.png"
          alt="share on twitter"
          width="32"
          height="32"
        />
      </a>
    </div>
    <div class="more-like-this text-right content-end flex-grow">
      <a
        class="post-metadata"
        href="/categories.html#software-engineering"
      >
        in: software-engineering
      </a>
      <div>
<span class="text-slate-500">
  <img class="w-6 h-6 inline-block" src="/images/tag.svg" alt="tag-icon" />
  <a class="no-underline hover:underline" href="/tags.html#c">
    c#
  </a>
</span>

<span class="text-slate-500">
  <img class="w-6 h-6 inline-block" src="/images/tag.svg" alt="tag-icon" />
  <a class="no-underline hover:underline" href="/tags.html#design-patterns">
    design-patterns
  </a>
</span>

</div>
    </div>
  </div>
</header>

	<div class="post">
		<p>It is relatively common to find (or write) a line of code like this</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kt">var</span> <span class="n">thingy</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Thingy</span><span class="p">(</span><span class="n">_someDependency</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</code></pre></div></div>

<p>Reading this line a person can know this is initialising a <code class="language-plaintext highlighter-rouge">Thingy</code> which takes a dependency on something… and something else is false.
<!--alex ignore easy --->
I'm really lazy and easily distracted so I don't like to have to think about anything except the one task I'm trying to not get distracted from. Having to think about what it means that something is false provides an opportunity for me to get distracted.</p>

<!--more-->

<p>Also, this means there is some information or some decision that has been taken by a previous developer that they have kept in their brain - all the person reading this line sees is the result of that. Each time somebody comes to this class they may have to invest time reminding themselves what the boolean parameter means.</p>

<h1 id="can-it-be-better">Can it be better?</h1>

<p>Well, C# (as well as other languages) allows <a href="http://msdn.microsoft.com/en-gb/library/dd264739.aspx">named parameters</a> so this <code class="language-plaintext highlighter-rouge">Thingy</code> could be instantiated by using</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kt">var</span> <span class="n">thingy</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Thingy</span><span class="p">(</span><span class="n">_someDependency</span><span class="p">,</span> <span class="n">disableUnexpectedBehaviour</span><span class="p">:</span> <span class="k">false</span><span class="p">);</span>
</code></pre></div></div>

<p>Now when a person reads this line of code they know more about what is happening and that should support them in introducing correct code. Here they learn that there is a mode where this class can do something in an unexpected way. Since the named parameter makes the intent clearer a developer can make a decision about how to instantiate the class with a reasonable idea of what will happen.</p>

<p>However, the next time someone writes code that uses a <code class="language-plaintext highlighter-rouge">Thingy</code> they don't have to use a named parameter so it is still possible to use the form which obscures intent.</p>

<h1 id="static-factory-method">Static Factory Method</h1>

<p>It is possible to hide the constructor and provide <a href="http://refactoring.com/catalog/replaceConstructorWithFactoryMethod.html">static factory methods</a> to create and return instances. Where there is more than one way to construct the object more than one factory method can be provided to clarify this difference.</p>

<p>These are my latest obsession - so I recommend taking the time to jump to the declaration of <code class="language-plaintext highlighter-rouge">Thingy</code> and do something like this:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">Thingy</span> 
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">SomeDependency</span> <span class="n">_someDependency</span><span class="p">;</span>
	<span class="k">private</span> <span class="k">readonly</span> <span class="kt">bool</span> <span class="n">_disableUnexpectedBehaviour</span>

    <span class="c1">// make the constructor private - this isn't necessary </span>
    <span class="c1">// but enforces the use of the static factory methods</span>
	<span class="k">private</span> <span class="nf">Thingy</span><span class="p">(</span><span class="n">SomeDependency</span> <span class="n">someDependency</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">disableUnexpectedBehaviour</span><span class="p">)</span> 
	<span class="p">{</span>
		<span class="n">_someDependency</span> <span class="p">=</span> <span class="n">someDependency</span><span class="p">;</span>
		<span class="n">_disableUnexpectedBehaviour</span> <span class="p">=</span> <span class="n">disableUnexpectedBehaviour</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="c1">//add static factory methods</span>
	<span class="k">public</span> <span class="k">static</span> <span class="n">Thingy</span> <span class="nf">WithExpectedBehaviour</span><span class="p">(</span><span class="n">SomeDependency</span> <span class="n">someDependency</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">Thingy</span><span class="p">(</span><span class="n">someDependency</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">static</span> <span class="n">Thingy</span> <span class="nf">WithUnexpectedBehaviour</span><span class="p">(</span><span class="n">SomeDependency</span> <span class="n">someDependency</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">Thingy</span><span class="p">(</span><span class="n">someDependency</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="c1">//&lt;snip/&gt;</span>
<span class="p">}</span>

	<span class="kt">var</span> <span class="n">thingy</span> <span class="p">=</span>  <span class="n">Thingy</span><span class="p">.</span><span class="nf">WithExpectedBehaviour</span><span class="p">(</span><span class="n">_someDependency</span><span class="p">);</span>
	<span class="kt">var</span> <span class="n">crazyThingy</span> <span class="p">=</span>  <span class="n">Thingy</span><span class="p">.</span><span class="nf">WithUnexpectedBehaviour</span><span class="p">(</span><span class="n">_someDependency</span><span class="p">);</span>

</code></pre></div></div>

<p>Now you can't construct a <code class="language-plaintext highlighter-rouge">Thingy</code> without using one of these methods. This means that your decision to use a <code class="language-plaintext highlighter-rouge">Thingy</code> includes an explicit decision about what it means for it to be included in your code. Yay for clarity!</p>

	</div>
	<div class="mt-8">
  
  <h1>More like this...</h1>
   
  <div class="grid grid-cols-3 gap-4"></div> 
  
</div>

</article>
    </main>
    <footer class="w-full h-4 bg-black text-white py-8 px-4">
  <a class="no-underline text-white" href="https://pauldambra.dev/feed.xml">
    <img class="inline w-6 h-6" src="/images/rss.svg" alt="the rss feed" />
    <span>Subscribe to RSS feed</span>
  </a>
</footer>
 
    <script>
      var tsl = document.getElementById("twitter-share-link");
      tsl.addEventListener("click", function () {
        ga("send", {
          hitType: "social",
          socialNetwork: "twitter",
          socialAction: "tweet",
          socialTarget: "https://pauldambra.dev/static-factory-methods.html",
        });
      });

      var fsl = document.getElementById("facebook-share-link");
      fsl.addEventListener("click", function () {
        ga("send", {
          hitType: "social",
          socialNetwork: "facebook",
          socialAction: "share",
          socialTarget: "https://pauldambra.dev/static-factory-methods.html",
        });
      });
    </script>
    

    <script defer src="/register-service-worker.js"></script>

    <link
      href="https://fonts.googleapis.com/css?family=Khula&display=swap"
      rel="stylesheet"
    />
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" href="/images/icons/icon-152x152.png" />
    <!-- theme-color defines the top bar color-->
    <meta name="theme-color" content="#575757" />
    <meta
      http-equiv="X-Content-Security-Policy"
      content="default-src 'self'; script-src 'report-sample' 'self' https://app.posthog.com/static/array.js https://www.googletagmanager.com/gtag/js; style-src 'report-sample' 'self' https://fonts.googleapis.com; object-src 'none'; base-uri 'self'; connect-src 'self' https://app.posthog.com; font-src 'self'; frame-src 'self'; img-src 'self'; manifest-src 'self'; media-src 'self'; report-uri https://pauldambra.report-uri.com/r/d/csp/enforce; worker-src 'self';"
    />
    <!-- Add to home screen for Safari on iOS-->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="MiRaNo" />
    <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png" />

    <!-- Add to home screen for Windows-->
    <meta
      name="msapplication-TileImage"
      content="/images/icons/icon-152x152.png"
    />
    <meta name="msapplication-TileColor" content="#575757" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>How to design an unsubscribe link?!?</title>
    <link rel="canonical" href="https://pauldambra.dev/2011/08/how-to-design-unsubscribe-link.html" />
    <meta property="og:url" content="https://pauldambra.dev/2011/08/how-to-design-unsubscribe-link.html" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to design an unsubscribe link?!?" />
    <meta
      property="og:description"
      content="a blog about software engineering"
    />
    <meta
      property="og:image"
      content="https://pauldambra.dev/images/cardboard.jpg"
    />
    <meta name="twitter:creator" content="@pauldambra" />
    <meta property="fb:app_id" content="1029758320473951" />

    <meta name="viewport" content="width=device-width" />
    <meta
      name="description"
      content="a blog about software engineering"
    />
    <meta property="fb:pages" content="1029758320473951" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Mindless Rambling Nonsense"
      href="https://pauldambra.dev/feed.xml"
    />
    <link rel="shortcut icon" href="/favicon.ico" />

    <link rel="prefetch" href="/images/cardboard.jpg" />

    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <meta name="msvalidate.01" content="54691C3C7B863CEE60F0305D6EDFF7A8" />
    <meta
      name="google-site-verification"
      content="hLKEdujpXNQ9PSZWEcQkwxCgL2z1tWxVedeaUmttH7c"
    />
    <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group identify setPersonProperties setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags resetGroups onFeatureFlags addFeatureFlagsHandler onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_YwZdW7eDzRlzm3YiNvZpAR5oGhmc9nYeVwuUq5mef3b', {
        api_host: 'https://ph.pauldambra.dev',
        defaults: '2026-01-30'
    })
</script>

  </head>
  <body class="flex flex-col h-screen">
    <header class="flex flex-col px-8 pt-4 text-white text-xl" role="banner">
  <div class="flex flex-col sm:flex-row">
    <div class="no-underline hover:underline">
      <a href="/">Mindless Rambling Nonsense</a>
    </div>
    <div class="flex-grow my-2 sm:m-0"></div>
    <div class="flex justify-start items-end flex-col text-sm">
      <div class="flex items-center">
        <div class="mr-4">Paul D'Ambra</div>
        <a href="https://github.com/pauldambra" rel="noopener">
          <img
            src="/images/GitHub-Mark-Light-32px.png"
            alt="pauldambra on github"
            width="32"
            height="32"
          />
        </a>
      </div>
      <div class="flex items-center">
        <div class="mr-4">Fangler</div>
        <a href="https://twitter.com/pauldambra" rel="noopener">
          <img
            src="/images/twitter-32.png"
            alt="pauldambra on twitter"
            width="32"
            height="32"
          />
        </a>
      </div>
      <div class="flex items-center">
        <div class="mr-4"></div>
        <a rel="me" href="https://mastodon.me.uk/@pauldambra">
        </a>
      </div>
    </div>
  </div>
  <div class="flex-grow"></div>
  <div
    class="flex align-middle items-start px-2 py-4 text-white space-x-4 text-lg"
  >
    <nav role="navigation">
      <a class="underline" href="/">Blog Posts</a>
      <a class="underline ml-5" href="/weeknotes.html">Week Notes</a>
      <a class="underline ml-5" href="/kids-games.html">Kids games</a>
    </nav>
  </div>
</header>

    <main role="main" class="bg-white p-4 w-11/12 m-auto flex-auto flex-grow">
      

<script type="application/ld+json">
  {
     "@context":"http://schema.org",
     "@type":"BlogPosting",
     "headline":"How to design an unsubscribe link?!?",
     "genre":"",
     "keywords":"",
     "wordCount":"469",
     "url":"https://pauldambra.dev/2011/08/how-to-design-unsubscribe-link.html",
     "datePublished":"2011-08-05",
     "author":{
        "@type":"Person",
        "name":"Paul D'Ambra",
        "sameAs":[
          "https://twitter.com/pauldambra",
          "https://github.com/pauldambra",
          "https://plus.google.com/u/0/+PaulDAmbraPlus"
        ]
     },
     "publisher":{
  "@type": "Organization",
      "name": "Paul D'Ambra",
      "sameAs": [
          "https://twitter.com/pauldambra",
          "https://github.com/pauldambra",
          "https://plus.google.com/u/0/+PaulDAmbraPlus"
      ],
      "logo": {
        "@type": "ImageObject",
        "contentUrl": "https://pauldambra.dev/images/logo.png",
          "url": "https://pauldambra.dev"
      }
     },
     "image":{
        "@type":"ImageObject",
        "contentUrl":"https://pauldambra.dev/images/cardboard.jpg",
        "url":"https://pauldambra.dev",
        "height":"450",
        "width":"1000"
     },
     "mainEntityOfPage":{
        "@type":"WebPage",
        "@id":"https://pauldambra.dev/2011/08/how-to-design-unsubscribe-link.html"
     },
     "articleBody":"We  send  out  mail  to  70,000+  members  of  our  organisation.  In  theory  they  know  they're  getting  it  cos  they're  advised  when  they  join  the  organisation  that  we'll  send  the  email…  yes,  I  know  that  implicit  opt-ins  aren't  best  practice…  I  want  to  polish  up  our  email  unsubscribe  flow  since  the  amount  of  mail  we  send  out  is  steadily  climbing  as  we  move  from  paper  to  email  for  more  things.\n\n\n\nSo  first  idea…  you  click  a  link  =  you  get  unsubscribed…\n\nhttp://unsubscribe.somewhere.co.uk/123435\n\nwhere  12345  is  your  user  id.\n\nExcept  someone  malicious  could\n\n  for(i=0;i&lt;1000000000;i++)\n  {\n  \t$.get('http://unsubscribe.somewhere.co.uk/'+i);\n  }\n\n\nand  unsubscribe  every  member.\n\nNo,  it  isn't  that  likely  since  this  is  for  a  climbing  organisation  but,  it's  an  avoidable  risk!\n\nAlright,  we  don't  need  to  make  it  into\n\nhttp://unsubscribe.somewhere.co.uk/{encrypted_something}\n\nI  think  that  would  be  overkill  so  let's\n\nhttp://unsubscribe.somewhere.co.uk/email_address\n\nThat  way  although  you  could  sit  and  guess  the  email  addresses  of  members  to  unsubscribe  them  at  least  it  is  harder  and  the  urls  are  readable\n\nExcept  the  HTTP  RFC  says  that  a  GET  request  should  be  idempotent.\n\n\n\n\n    \"Idempotence  is  the  property  of  certain  operations  in  mathematics  and  computer  science,  that  they  can  be  applied  multiple  times  without  changing  the  result.\"\n\n\nIn  short  someone  clicking  a  link  can  get  information  from  the  database  but  shouldn't  update  information.\n\nThe  problem  is  that  I  think  that  is  counter-intuitive.  I  know  I  don't  click  links  hoping  that  the  actions  carried  out  are  idempotent.  I  click  a  link  expecting  something  to  happen  and  if  we  confound  a  user's  expectations  then  we  get  to  do  the  same  job  at  least  one  more  time…  and  I'm  lazy  -  so  that  isn't  a  solution  for  me\n\nBut  what  is  the  solution  since  people  are  not  going  to  want  to  spend  time  reading  the  page.  How  do  I  make  what  someone  sees  work  well?\n\nI'm  a  google  fanboy  so  what  do  they  say\n\n\n    Unsubscribing&lt;/span&gt;A  user  must  be  able  to  unsubscribe  from  your  mailing  list  through  one  of  the  following  means:\n\n    \n        A  prominent  link  in  the  body  of  an  email  leading  users  to  a  page  confirming  his  or  her  unsubscription  (no  input  from  the  user,  other  than  confirmation,  should  be  required).2)  By  replying  to  your  email  with  an  unsubscribe  request.\n    \n\n\nSo  I  think  that  we're  going  to  shufty  this  all-around  a  bit.\n\nTwo  types  of  mailings  =  two  types  of  link\n\nunsubscribe.somewhere.co.uk/areas/email@person.comunsubscribe.somewhere.co.uk/monthly/email@person.com\n\nWhen  you  hit  the  page  you  can  click  a  big  button  to  confirm  the  action  (which  ajax-ily  updates  your  displayed  state  and  we  can  track  how  many  people  hit  the  page  without  doing  anything).\n\n\n"
  }
</script>

<article>
<header class="flex flex-col border-b-black border-b-2 bg-white text-black">
  <div class="heading">
    <div class="date">Fri Aug 05 2011</div>
    <h1 class="title leading-10 pt-2 mb-0 mt-1">How to design an unsubscribe link?!?</h1>
  </div>
  <div class="meta flex-grow flex flex-row">
    <div class="share-this flex self-end space-x-2">
      <a
        id="facebook-share-link"
        class="social-share"
        target="_blank"
        rel="noopener"
        href="https://www.facebook.com/dialog/share?app_id=305449093152216&href=https://pauldambra.dev/2011/08/how-to-design-unsubscribe-link.html"
      >
        <img
          class="w-8"
          src="/images/facebook-black-32.png"
          alt="share on facebook"
          width="32"
          height="32"
        />
      </a>
      <a
        id="twitter-share-link"
        class="social-share"
        target="_blank"
        rel="noopener"
        href="https://twitter.com/intent/tweet?text=How+to+design+an+unsubscribe+link%3F%21%3F&via=pauldambra&url=https://pauldambra.dev/2011/08/how-to-design-unsubscribe-link.html"
      >
        <img
          class="w-8"
          src="/images/twitter-black-32.png"
          alt="share on twitter"
          width="32"
          height="32"
        />
      </a>
    </div>
    <div class="more-like-this text-right content-end flex-grow">
      <a
        class="post-metadata"
        href="/categories.html#http"
      >
        in: HTTP
      </a>
      <div>
<span class="text-slate-500">
  <img class="w-6 h-6 inline-block" src="/images/tag.svg" alt="tag-icon" />
  <a class="no-underline hover:underline" href="/tags.html#get">
    GET
  </a>
</span>

<span class="text-slate-500">
  <img class="w-6 h-6 inline-block" src="/images/tag.svg" alt="tag-icon" />
  <a class="no-underline hover:underline" href="/tags.html#idempotence">
    idempotence
  </a>
</span>

<span class="text-slate-500">
  <img class="w-6 h-6 inline-block" src="/images/tag.svg" alt="tag-icon" />
  <a class="no-underline hover:underline" href="/tags.html#detail">
    detail
  </a>
</span>

</div>
    </div>
  </div>
</header>

	<div class="post">
		<p>We send out mail to 70,000+ members of our organisation. In theory they know they're getting it cos they're advised when they join the organisation that we'll send the email… yes, I know that implicit opt-ins aren't best practice… I want to polish up our email unsubscribe flow since the amount of mail we send out is steadily climbing as we move from paper to email for more things.</p>

<!--more-->

<p>So first idea… you click a link = you get unsubscribed…</p>

<p><code class="language-plaintext highlighter-rouge">http://unsubscribe.somewhere.co.uk/123435</code></p>

<p>where 12345 is your user id.</p>

<p>Except someone malicious could</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> for(i=0;i&lt;1000000000;i++)
 {
 	$.get('http://unsubscribe.somewhere.co.uk/'+i);
 }
</code></pre></div></div>

<p>and unsubscribe every member.</p>

<p>No, it isn't that likely since this is for a climbing organisation but, it's an avoidable risk!</p>

<p>Alright, we don't need to make it into</p>

<p><code class="language-plaintext highlighter-rouge">http://unsubscribe.somewhere.co.uk/{encrypted_something}</code></p>

<p>I think that would be overkill so let's</p>

<p><code class="language-plaintext highlighter-rouge">http://unsubscribe.somewhere.co.uk/email_address</code></p>

<p>That way although you could sit and guess the email addresses of members to unsubscribe them at least it is harder and the urls are readable</p>

<p>Except the <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">HTTP RFC</a> says that a GET request should be idempotent.</p>

<p><img src="http://1.bp.blogspot.com/-uEF-Zso3K5M/Tju1K8hAhrI/AAAAAAAAAVk/Vi_WggM_FEY/s1600/1095675-futurama_fry_looking_squint_super.jpg" alt="not sure if meme is appropriate or you should feel bad" loading="lazy" /></p>

<blockquote>
  <p><a href="http://en.wikipedia.org/wiki/Idempotence">"Idempotence is the property of certain operations in mathematics and computer science, that they can be applied multiple times without changing the result."</a></p>
</blockquote>

<p>In short someone clicking a link can get information from the database but shouldn't update information.</p>

<p>The problem is that I think that is counter-intuitive. I know I don't click links hoping that the actions carried out are idempotent. I click a link <em>expecting</em> something to happen and if we <a href="http://en.wikipedia.org/wiki/Principle_of_least_astonishment">confound a user's expectations </a>then we get to do the same job at least one more time… and I'm lazy - so that isn't a solution for me</p>

<p>But what is the solution since people are not going to want to spend time reading the page. How do I make what someone sees work well?</p>

<p>I'm a google fanboy so <a href="https://mail.google.com/support/bin/answer.py?answer=81126#unsub">what do they say</a></p>

<blockquote>
  <p>Unsubscribing&lt;/span&gt;<br />A user must be able to unsubscribe from your mailing list through one of the following means:</p>

  <ol>
    <li>A prominent link in the body of an email leading users to a page confirming his or her unsubscription (no input from the user, other than confirmation, should be required).<br />2) By replying to your email with an unsubscribe request.</li>
  </ol>
</blockquote>

<p>So I think that we're going to shufty this all-around a bit.</p>

<p>Two types of mailings = two types of link</p>

<p>unsubscribe.somewhere.co.uk/areas/email@person.com<br />unsubscribe.somewhere.co.uk/monthly/email@person.com</p>

<p>When you hit the page you can click a big button to confirm the action (which ajax-ily updates your displayed state and we can track how many people hit the page without doing anything).</p>

<p><img src="http://4.bp.blogspot.com/-olQbQBRHcak/Tju4pxILv1I/AAAAAAAAAVs/jizlCCsfz1M/s1600/mockup.png" alt="mockup of UI" loading="lazy" /></p>

	</div>
	<div class="mt-8">
  
  <h1>More like this...</h1>
   
  <div class="grid grid-cols-3 gap-4"></div> 
  
</div>

</article>
    </main>
    <footer class="w-full h-4 bg-black text-white py-8 px-4">
  <a class="no-underline text-white" href="https://pauldambra.dev/feed.xml">
    <img class="inline w-6 h-6" src="/images/rss.svg" alt="the rss feed" />
    <span>Subscribe to RSS feed</span>
  </a>
</footer>
 
    <script>
      var tsl = document.getElementById("twitter-share-link");
      tsl.addEventListener("click", function () {
        ga("send", {
          hitType: "social",
          socialNetwork: "twitter",
          socialAction: "tweet",
          socialTarget: "https://pauldambra.dev/2011/08/how-to-design-unsubscribe-link.html",
        });
      });

      var fsl = document.getElementById("facebook-share-link");
      fsl.addEventListener("click", function () {
        ga("send", {
          hitType: "social",
          socialNetwork: "facebook",
          socialAction: "share",
          socialTarget: "https://pauldambra.dev/2011/08/how-to-design-unsubscribe-link.html",
        });
      });
    </script>
    

    <script defer src="/register-service-worker.js"></script>

    <link
      href="https://fonts.googleapis.com/css?family=Khula&display=swap"
      rel="stylesheet"
    />
  </body>
</html>
